# API Documentation

## Sign In / Registeration

### Sign up
- Description: register user
- Request `POST /signup`
    - content-type: application/json
    - body: object
        - username: (String) new user's username
        - password: (String) new user's password
        - role: (String) new user's role
    - example:
    ```
        fetch('http://localhost:8000/signup', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({username: "MikeOxlong", password: "abc", role: "instructor"})
    ```
- Responses:
    - Status: 200 
        - indication: User successfully registered without error
        - content-type: application/json
        - body: json object
            - username: (String) the username of the new user
            - role: (String) the users role
            - success: (bool) true
    - Status: 400 
        - indication: request made without role, password or username in body
        - content-type: application/json
        - body: json object
            - message: (String) "Request body must contain username, password and role attributes"
            - success: (bool) false
    - Status: 409 
        - indication: user registering with same username of an existing user
        - content-type: application/json
        - body: json object
            - message: (String) username + " is already taken"
            - success: (bool) false
     - Status: 422
        - indication: request made with empty username field
        - content-type: application/json
        - body: json object
            - message: (String) "bad input: username must be non-empty"
            - success: (bool) false
    - Status: 422
        - indication: request made with role that is not instructor, partner or entrepeneur
        - content-type: application/json
        - body: json object
            - message: (String) "bad input: role must be either instructor, partner or entrepeneur"
            - success: (bool) false
    - Status: 422 
        - indication: request made with empty password field
        - content-type: application/json
        - body: json object
            - message: (String) "bad input: password must be non-empty "
    - Status: 500
        - indication: Server side error occured when saving user
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false


### Sign In
- Description: sign in already registered user
- Request `POST /signin`
    - content-type: application/json
    - body: object
        - username: (String) user's username
        - password: (String) user's password
    - example: 
    ```
        fetch('http://localhost:8000/signin', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({username: "abc", password: "xyz"})
        })
    ```

- Responses
    - Status: 200 
        - indication: User successfully registered without error
        - content-type: application/json
        - cookie: json object
            - username: (String) the username of the new user
        - body: json object
            - success: (bool) true
    - Status: 401
        - indication: Incorrect password used
        - content-type: application/json
        - body: json object
            - message: (String) "Access Denied: Incorrect password"
            - success: (bool) false (indicates sign in unsuccessful)
    - Status: 401
        - indication: Username does not belong to an existing user
        - content-type: application/json
        - body: json object
            - message: (String) "Access Denied: No user with username " username "is registered"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occured when saving user
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false


## Groups

### Retrieve all groups
- Description: Get all groups
- Request `GET /groups/`
    - example:
    ```
        fetch('http://localhost:8000/group', {
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: Group successfully retrieved
        - content-type: application/json
        - body: Array of group objects
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Retrieve one group
- Description: Get a specific group
- Request `GET /groups/:id`
    - params:
        - id: The id of the group
    - example
    ```
        fetch('http://localhost:8000/group/0123456', {
	credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: Group successfully retrieved
        - content-type: application/json
        - body: Array of all group objects in database
    - Status: 404
        - indication: Group not found
        - content-type: application/json
        - body: json object
            - message: (String) "Could not find group"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Remove user from group
- Description: Remove a user from a group
- Request `DELETE /groups/delete/:groupID/:userID`
    - params:
        - groupID : the ID group you want to remove the user from
        - userID: the Id of the user to be removed
    - example:
    ```
        fetch('http://localhost:8000/group/delete/123/456', {
            method: 'DELETE',
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: user removed from group successfully
        - content-type: application/json
        - body: json object
            - success: (bool) true
     - Status: 404
        - indication: couldn’t group
        - content-type: application/json
        - body: json object
            - message: (String) "Group could not be found"
            - success: (bool) false
    - Status: 404
        - indication: couldn’t find user to delete
        - content-type: application/json
        - body: json object
            - message: (String) "User could not be found"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Add user to group
- Description: Remove a user from a group
- Request `POST /groups/add/:groupID`
    - params:
        - groupID : the ID group you want to add user to
    - content-type: application/json
    - body:
        - userID: (String) the username of user to add
    - example:
    ```
        fetch('http://localhost:8000/group/add/123', {
            method: 'DELETE',
            credentials: ‘include’
	headers: {'Content-Type':'application/json'},
            body: JSON.stringify({userID: "MikeOxlong"})
        })
    ```
- Responses:
    - Status: 200 
        - indication: user added to successfully
        - content-type: application/json
        - body: json object
	- success: (bool) true
      - Status: 400
        - indication: user already in group
        - content-type: application/json
        - body: json object
            - message: (String) "Member is already in group"
            - success: (bool) false
     - Status: 404
        - indication: couldn’t group
        - content-type: application/json
        - body: json object
            - message: (String) "Group with Id " + groupID + " does not exist"
            - success: (bool) false
    - Status: 404
        - indication: couldn’t find user to add
        - content-type: application/json
        - body: json object
            - message: (String) "User could not be found"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Add group
- Description: Create a new group
- Request `POST /groups/`
    - params:
    - content-type: application/json
    - body:
        - name: (String) the group name
        - about: (String) the group bio
        - picture: (String) a image url of the group profile pic
    - example:
    ```
        fetch('http://localhost:8000/group/', {
            method: 'POST',
            credentials: ‘include’
	    headers: {'Content-Type':'application/json'},
            body: JSON.stringify({name: "MikeOxlong", about: "about", picture: "picture"})
        })
    ```
- Responses:
    - Status: 201
        - indication: group added to successfully
        - content-type: application/json
        - body: json object
            - name: (String) the saved group name
            - owner: (String) the owner of group (initially empty)
            - members: (Array) usernames of members of group (initially empty)
            - id: (String) the id of group in database
            - about: (String) the saved group bio
            - picture: (String) a saved image url of the group profile pic
    - Status: 400
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server

### Delete  group
- Description: Remove a group
- Request `DELETE /groups/delete/:groupID/`
     - params:
        - groupID : the ID group you want to delete
     - example:
    ```
        fetch('http://localhost:8000/group/delete/123/', {
            method: 'DELETE',
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: group deleted successfully
        - content-type: application/json
        - body: json object
	    - success: (bool) true
     - Status: 404
        - indication: couldn’t find group to delete
        - content-type: application/json
        - body: json object
            - message: (String) "Group with Id" + groupID + "does not exist"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false
     
### Edit group details
- Description: Udate group details
- Request `PATCH /group/:`
    - params:
    	- groupID: (String) the id of the group that you want to update
    - content-type: application/json
    - body:
        - name: (String) the new group name
        - about: (String) the new group bio
        - picture: (String) a new image url of the group profile pic
    - example:
    ```
        fetch('http://localhost:8000/group/:groupID', {
            method: 'PATCH',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({name: "groupName", about: "about", picture: "pictureUrl"})
        })
    ```
- Responses:
    - Status: 200
    	- indication: group updated to successfully
        - content-type: application/json
        - body: json object
            - name: (String) the updated group name
            - owner: (String) the updated owner of group (initially empty)
            - members: (Array) usernames of members of group (initially empty)
            - id: (String) the updated id of group in database
            - about: (String) the updated group bio
            - picture: (String) a updated image url of the group profile pic
    - Status: 400
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server

## Video

### Find video
- Description: register user
- Request `Get /video/`
    - queries (optional):
        - subject: (String) subject of video
        - author: (String) author of video
        - id: (String) id of video
    - example:
    ```
        fetch('http://localhost:8000/video/?subject=art&author=jo', {
            method: 'GET'
        });
    ```
- Responses:
    - Status: 200 
        - indication: User successfully registered without error
        - content-type: application/json
        - body: array of video objects satisfying all the query parameters
    - Status: 500
        - indication: Server side error occured when saving user
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false
