# API Documentation

## Sign In / Registeration

### Sign up
- Description: register user
- Request `POST /signup`
    - content-type: application/json
    - body: object
        - username: (String) new user's username
        - password: (String) new user's password
        - role: (String) new user's role
    - example:
    ```
        fetch('http://localhost:8000/signup', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({username: "MikeOxlong", password: "abc", role: "instructor"})
    ```
- Responses:
    - Status: 200 
        - indication: User successfully registered without error
        - content-type: application/json
        - body: json object
            - username: (String) the username of the new user
            - role: (String) the users role
            - success: (bool) true
    - Status: 400 
        - indication: request made without role, password or username in body
        - content-type: application/json
        - body: json object
            - message: (String) "Request body must contain username, password and role attributes"
            - success: (bool) false
    - Status: 409 
        - indication: user registering with same username of an existing user
        - content-type: application/json
        - body: json object
            - message: (String) "Username is already taken"
            - success: (bool) false
     - Status: 422
        - indication: request made with empty username field
        - content-type: application/json
        - body: json object
            - message: (String) "bad input: username must be non-empty"
            - success: (bool) false
    - Status: 422
        - indication: request made with role that is not instructor, partner or entrepeneur
        - content-type: application/json
        - body: json object
            - message: (String) "bad input: role must be either instructor, partner or entrepeneur"
            - success: (bool) false
    - Status: 422 
        - indication: request made with empty password field
        - content-type: application/json
        - body: json object
            - message: (String) "bad input: password must be non-empty "
    - Status: 500
        - indication: Server side error occured when saving user
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Sign In
- Description: sign in already registered user
- Request `POST /signin`
    - content-type: application/json
    - body: object
        - username: (String) user's username
        - password: (String) user's password
    - example: 
    ```
        fetch('http://localhost:8000/signin', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({username: "abc", password: "xyz"})
        })
    ```

- Responses
    - Status: 200 
        - indication: User successfully registered without error
        - content-type: application/json
        - cookie: json object
            - user: (String) the username and role of the user seperated by a space
        - body: json object
            - success: (bool) true
    - Status: 401
        - indication: Incorrect password used
        - content-type: application/json
        - body: json object
            - message: (String) "Access Denied: Incorrect password"
            - success: (bool) false (indicates sign in unsuccessful)
    - Status: 401
        - indication: Username does not belong to an existing user
        - content-type: application/json
        - body: json object
            - message: (String) "Access Denied: No user with username " username "is registered"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occured when saving user
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false


## Groups

### Retrieve all groups
- Description: Get all groups
- Request `GET /groups/`
    - example:
    ```
        fetch('http://localhost:8000/group', {
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: Group successfully retrieved
        - content-type: application/json
        - body: Array of group objects
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Retrieve one group
- Description: Get a specific group
- Request `GET /groups/:id`
    - params:
        - id: The id of the group
    - example
    ```
        fetch('http://localhost:8000/group/0123456', {
	credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: Group successfully retrieved
        - content-type: application/json
        - body: Array of all group objects in database
    - Status: 404
        - indication: Group not found
        - content-type: application/json
        - body: json object
            - message: (String) "Could not find group"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Remove user from group
- Description: Remove a user from a group
- Request `DELETE /groups/delete/:groupID/:userID`
    - params:
        - groupID : the ID group you want to remove the user from
        - userID: the Id of the user to be removed
    - example:
    ```
        fetch('http://localhost:8000/group/delete/123/456', {
            method: 'DELETE',
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: user removed from group successfully
        - content-type: application/json
        - body: json object
            - success: (bool) true
     - Status: 404
        - indication: couldn’t group
        - content-type: application/json
        - body: json object
            - message: (String) "Group could not be found"
            - success: (bool) false
    - Status: 404
        - indication: couldn’t find user to delete
        - content-type: application/json
        - body: json object
            - message: (String) "User could not be found"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Add user to group
- Description: Remove a user from a group
- Request `POST /group/add/:groupID`
    - params:
        - groupID : the ID group you want to add user to
    - content-type: application/json
    - body:
        - userID: (String) the username of user to add
    - example:
    ```
        fetch('http://localhost:8000/group/add/123', {
            method: 'DELETE',
            credentials: ‘include’
	headers: {'Content-Type':'application/json'},
            body: JSON.stringify({userID: "MikeOxlong"})
        })
    ```
- Responses:
    - Status: 200 
        - indication: user added to successfully
        - content-type: application/json
        - body: json object
	- success: (bool) true
      - Status: 400
        - indication: user already part of a group
        - content-type: application/json
        - body: json object
            - message: (String) ":userID is already part of a group"
            - success: (bool) false
     - Status: 404
        - indication: couldn’t group
        - content-type: application/json
        - body: json object
            - message: (String) "Group with Id " + groupID + " does not exist"
            - success: (bool) false
    - Status: 404
        - indication: couldn’t find user to add
        - content-type: application/json
        - body: json object
            - message: (String) "User could not be found"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Add group
- Description: Create a new group
- Request `POST /groups/`
    - params:
    - content-type: application/json
    - body:
        - name: (String) the group name
        - about: (String) the group bio
        - picture: (String) a image url of the group profile pic
    - example:
    ```
        fetch('http://localhost:8000/group/', {
            method: 'POST',
            credentials: ‘include’
	    headers: {'Content-Type':'application/json'},
            body: JSON.stringify({name: "MikeOxlong", about: "about", picture: "picture"})
        })
    ```
- Responses:
    - Status: 201
        - indication: group added to successfully
        - content-type: application/json
        - body: json object
            - name: (String) the saved group name
            - owner: (String) the owner of group (initially empty)
            - members: (Array) usernames of members of group (initially empty)
            - id: (String) the id of group in database
            - about: (String) the saved group bio
            - picture: (String) a saved image url of the group profile pic
    - Status: 400
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server

### Delete  group
- Description: Remove a group
- Request `DELETE /groups/delete/:groupID/`
     - params:
        - groupID : the ID group you want to delete
     - example:
    ```
        fetch('http://localhost:8000/group/delete/123/', {
            method: 'DELETE',
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200 
        - indication: group deleted successfully
        - content-type: application/json
        - body: json object
	    - success: (bool) true
     - Status: 404
        - indication: couldn’t find group to delete
        - content-type: application/json
        - body: json object
            - message: (String) "Group with Id" + groupID + "does not exist"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false
     
### Edit group details
- Description: Udate group details
- Request `PATCH /group/:`
    - params:
    	- groupID: (String) the id of the group that you want to update
    - content-type: application/json
    - body:
        - name: (String) the new group name
        - about: (String) the new group bio
        - picture: (String) a new image url of the group profile pic
    - example:
    ```
        fetch('http://localhost:8000/group/65g6guy', {
            method: 'PATCH',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({name: "groupName", about: "about", picture: "pictureUrl"})
            credentials: ‘include’
        })
    ```
- Responses:
    - Status: 200
    	- indication: group updated to successfully
        - content-type: application/json
        - body: json object
            - name: (String) the updated group name
            - owner: (String) the updated owner of group (initially empty)
            - members: (Array) usernames of members of group (initially empty)
            - id: (String) the updated id of group in database
            - about: (String) the updated group bio
            - picture: (String) a updated image url of the group profile pic
    - Status: 400
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server

### Get group by member
- Description: Get the a users's group information
- Request `GET /group/member/:userID`
    - params:
    	- userID: (String) the id of the user that to find their group
    - content-type: application/json
    - example:
    ```
        fetch('http://localhost:8000/group/member/someguy', {
            method: 'GET',
            headers: {'Content-Type':'application/json'},
        })
    ```
- Responses:
    - Status: 200 
        - indication: group info retrieved successfully
        - content-type: application/json
        - body: json object
            - name: (String) the updated group name
            - owner: (String) the updated owner of group (initially empty)
            - members: (Array) usernames of members of group (initially empty)
            - id: (String) the updated id of group in database
            - about: (String) the updated group bio
            - picture: (String) a updated image url of the group profile pic
	    - success: (bool) true
     - Status: 404
        - indication: no group found. user is not part of a group
        - content-type: application/json
        - body: json object
            - message: (String) "User is not part of any group"
            - success: (bool) false
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

## Profiles

### Retrieve all profiles
- Description: retrieve every profile
- Request `GET /profile/`
    - example:
    ```
        fetch('http://localhost:8000/profile/', {
            credentials: 'include'
        })
    ```
- Responses:
    - Status: 200
    	- indication: profiles successfully retrieved
        - content-type: application/json
        - body: Array
            - array where each index is a user profile
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
  
### Retrieve specific profile
- Description: Retrieve a specified profile
- Request `GET /profile/:profileId`
    - params:
    	- profileIdID: (String) the username of profile that will be retrieved
    - example:
    ```
        fetch('http://localhost:8000/profile/bob', {
	    credentials: 'include'
        })
    ```
- Responses:
    - Status: 200
    	- indication:  profile successfully retrieved
        - content-type: application/json
        - body: json object
            - id: (String) the profile owner
            - firstName: (String) the first name
            - lastName: (String) the last name
            - bio: (String) the bio
            - dateJoined: (String) the user they joined the site
            - picture: (String) a image url of the group profile pic
            - role: (String) the user's role
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server

### Edit profile details
- Description: Update user profile
- Request `PATCH /profile/:profileId`
    - params:
    	- profileIdID: (String) the username of profile owner
    - content-type: application/json
    - body:
        - lastName: (String) the  users preferred first name
        - firstName: (String) the user preferred last name
        - picture: (String) a new image url of the profile pic
        - bio: (String) the updated user bio
    - example:
    ```
        fetch('http://localhost:8000/profile/bob', {
            method: 'PATCH',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({firstName: "Bob", lastName: "Poop", picture: "pictureUrl", bio: "new bio"})
        })
    ```
- Responses:
    - Status: 200
    	- indication: profile updated to successfully
        - content-type: application/json
        - body: json object
            - id: (String) the profile owner
            - firstName: (String) the updated first name
            - lastName: (String) the updated last name
            - bio: (String) the updated bio
            - dateJoined: (String) the day they joined the site
            - picture: (String) a updated image url of the group profile pic
            - role: (String) the users role
    - Status: 500
        - indication: Server side error occurred
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
   
## Videos

### Find video
- Description: Find a sppecific video based on authour, subject and/or id
- Request `Get /video/`
    - queries (optional):
        - subject: subject of video
        - author:  author of video
        - id: id of video
    - example:
    ```
        fetch('http://localhost:8000/video/?subject=art&author=jo', {
            method: 'GET',
            credentials: ‘include’
        });
    ```
- Responses:
    - Status: 200 
        - indication: Video retrieved successfully
        - content-type: application/json
        - body: array of video objects satisfying all the query parameters
    - Status: 500
        - indication: Server side error occured when saving user
        - content-type: application/json
        - body: json object
            - message: (String) error message generated by server
            - success: (bool) false

### Post video
- Description: Add a new video
- Request `POST /video/`
    - content-type: application/json
    - body: object
        - title: (String) video title
        - description: (String) description of video
        - subject: (String) video's subject 
        - url: (String) youtube url of video
    - example:
    ```
        fetch('http://localhost:8000/video/', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({title: "A science video", subject: "science", url: "youtube.com", description: "Science stuff"}),
            credentials: ‘include’
        }
    ```
    - Responses:
        - Status: 200
            - indication: video added successfully
            - content-type: application/json
            - body: json object
                - success: (bool) true
                - videoId: (String) the id of the video in database
        - Status: 400
            - indication: body missing some parameters
            - content-type: application/json
            - body: json object
                - success: (bool) false
                - message: (String) Request body must contain title, url, description and subject parameters
        - Status: 422
            - indication: title, url or subject paramaters are empty
            - content-type: application/json
            - body: json object
                - success: (bool) false
                - message: (String) Title, url and subject can not be empty string
        - Status: 422
            - indication: subject is not a recognized subject
            - content-type: application/json
            - body: json object
                - success: (bool) false
                - message: (String) Invalid subject
        - Status: 500
            - indication: Server side error occurred
            - content-type: application/json
            - body: json object
                - success: (bool) false
                - message: (String) error message generated by server
         
### Find videos by tag
- Description: retrieve a group of videos that have a certain tag
- Request `GET /video/browse/:tag`
    - params: 
        - tag: the tag
    - example:
    ```
        fetch('http://localhost:8000/video/browse/math', {
            credentials: 'include'
        });
    ```
- Responses:
    - Status: 200 
        - indication: Videos retrieved successfully
        - content-type: application/json
        - body: array of video objects that contain the specified tag
    - Status: 500
        - indication: Server side error occured when saving user
        
### Get all videos seperated based on tag
- Description: retrieve a group of videos that have a certain tag
- Request `GET /video/browse/`
    - params: 
        - tag: the tag
    - example:
    ```
        fetch('http://localhost:8000/video/browse/', {
            credentials: 'include'
        });
    ```
- Responses:
    - Status: 200 
        - indication: Videos retrieved successfully
        - content-type: application/json
        - body: array objects where each object contains attributes commonTag, which is the tag, and videoSec, which is an array of videos that contain that tag
    - Status: 500
        - indication: Server side error occured when saving user

## Search

### Search Profiles
- Description: Search profiles
- Request `GET /search/profile`
    - params:
        - searchString: String to search for 
        - page: Search page to go to 
    - example:
    ```
        fetch('localhost:8000/search/profile?searchString=Spiders&page=2', {
            method: 'GET',
        })
    ```
- Responses:
    - Status: 200 
        - indication: Search successful
        - content-type: application/json
        - body: Array of profile objects matched by relevence to searchString 
    - Status: 400 
        - indication: request made without searchString in params
        - content-type: application/json
        - body: json object
            - message: (String) Missing required fields
            - success: (bool) false
    - Status: 500
        - indication: Server side error occured when searching profiles
        - content-type: application/json
        - body: json object
            - message: (String) Error while searching
            - success: (bool) false

### Search Groups
- Description: Search profiles
- Request `GET /search/group`
    - params:
        - searchString: String to search for 
        - page: Search page to go to 
    - example:
    ```
        fetch('localhost:8000/search/group?searchString=Spiders&page=1', {
            method: 'GET',
        })
    ```
- Responses:
    - Status: 200 
        - indication: Search successful
        - content-type: application/json
        - body: Array of group objects matched by relevence to searchString 
    - Status: 400 
        - indication: request made without searchString in params
        - content-type: application/json
        - body: json object
            - message: (String) Missing required fields
            - success: (bool) false
    - Status: 500
        - indication: Server side error occured when searching groups
        - content-type: application/json
        - body: json object
            - message: (String) Error while searching
            - success: (bool) false

## Calendar Events

### Get calendar events
- Description: Get the specified user's calendar events.
- Request `GET /calendar/:userId`
    - params:
        - userId: (String) the user's id to get their events
    - example:
    ```
        fetch('localhost:8000/calendar/someguy', {
            method: 'GET',
        })
    ```
- Responses:
    - Status: 200 
        - indication: User's events retrieved
        - content-type: application/json
        - body: Array of event objects matched by user's personal, group, and general events
            - Event object
                - title: (String) title of the event
                - description: (String) description of the event
                - conferenceLink: (String) link to the meeting event
                - start: (Date) starting time of the event
                - end: (Date) endingg time of the event
                - type: (String) type of the event (personal, group, general)
                - groupId: (String) id of the user's group for group events (optional)
                - userId: id of the user who created the event
    - Status: 404 
        - indication: the user has no events in the database
        - content-type: application/json
        - body: json object
            - message: (String) User's events not found
            - success: (bool) false
    - Status: 500
        - indication: Server side error occured when searching groups
        - content-type: application/json
        - body: json object
            - message: (String) Error while searching
            - success: (bool) false